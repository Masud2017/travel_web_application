{% extends "layout/layout.html" %}
{% block title %}Travel reservation | Homepage{% endblock title %}
{% block main %}

<div name = "agent_section">
    <div class ="d-flex flex-column align-items-center">
        <form class = "d-flex gap-4 mt-sm-5" style = "width: 50rem">
            <input type = "text" class = "form-control" placeholder = "Search flights"/>
            <input type = "submit" class ='btn' style = "background-color : #F82D20;color : white" value= "Search"/>
        </form>

        <ul class="nav shadow" style = "border-radius : 0.5rem">
            <li class="nav-item">
                <a class="nav-link text-dark" href="/">Hotels</a>
            </li>
            <li class="nav-item" style = "background-color : #F82D20">
                <a class="nav-link text-light" href="{% url 'flights' %}">Flights</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="{% url 'activities' %}">Activities</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-dark" href="{% url 'packages' %}">Packages</a>
            </li>
            
        </ul>
    </div>

    <div class = 'p-sm-4'>
        <h5 style ="border-bottom: 4px solid #F82D20;display: inline">Flights<h5> 
        {% if 'auth_app.add_flights' in perms %}
            <div>
                <a href = "{% url 'add_flights' %}" class = "btn mt-sm-4" style = "background-color: #F82D20;color : white">Add flight</a>
            </div>
        {% endif %}

        <div class = "d-flex justify-content-center align-items-center" style = "height: 50vh" id = "spinner-container">
            <div class="spinner-border text-primary" role="status" id = 'spinner'>
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>

        <div name = "card-group" class ="d-flex justify-content-center gap-2" id = "card-grp" style ="display: none !important">
            
            {% for flight_item in flights %}
                <a href = "{% url 'flight_details' flight_item.id %}" style = "text-decoration: none;color : #343333">
                    <div class="card" style="width: 18rem;">
                        <img src={{flight_item.product_image_url}} class="card-img-top" alt="something went wrong">
                        <div class="card-body">
                        <h3 class="card-title text-center">{{flight_item.name}}</h3>
                        <p class="card-text text-center">{{flight_item.title}}</p>
                        </div>
                        <div class = "card-footer text-center p-sm-2" style = "color :#F82D20">
                            <p>Left {{flight_item.stock}} seats</p>
                            <p>${{flight_item.price}} USD</p>
                        </div>
                    </div>
                </a>
            {% endfor %}

        </div>
    </div>

</div>



{% endblock main %}